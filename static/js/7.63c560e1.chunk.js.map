{"version":3,"sources":["actions/GamesActions.js","components/ListGenres.js","actions/GenresActions.js","components/Video.js","components/ItemGame.js","utils/formatImageUrl.js","utils/useWindowSize.js","components/ListGames.js","containers/Games.js","actions/VideoAction.js","utils/apiCaller.js","utils/setMetacriticColor.js","components/FullVideo.js"],"names":["gamesFetchRequest","btnActive","type","FETCH_GAMES_REQUEST","payload","gamesFetchSuccess","fetchedData","nextUrl","FETCH_GAMES_SUCCESS","fetchGames","API_URL","dispatch","a","fetchData","data","next","results","console","log","connect","state","listGenres","collectionGenres","genres","loadingGenres","loading","listGames","collectionGame","fetchGenres","FETCH_GENRES_SUCCESS","location","useLocation","linkCallData","pathname","search","slice","lastIndexOf","useEffect","Object","keys","includes","mapGenres","map","item","label","slug","to","className","style","textDecoration","name","id","useState","expanded","setExpanded","onClick","prev","fontSize","transition","transform","getIdVideo","idVideo","openVideo","clip","play","videoRef","useRef","setLoading","Loading","ref","src","onLoadedData","current","volume","loop","video","ItemGame","urlBgImage","background_image","metacritic","hover","setHover","background_image_conver","replace","onMouseEnter","e","onMouseLeave","backgroundImage","marginRight","setMetacriticColor","title","React","memo","useWindowSize","width","window","innerWidth","windowSize","setWindowSize","handleResize","addEventListener","removeEventListener","size","colRendered","handleScroll","innerHeight","scrollY","document","body","offsetHeight","gridTemplateColumns","games","col","items","i","push","length","index","game","renderGames","videoId","actionVideo","margin","FullVideo","OPEN_VIDEO","closeVideo","CLOSE_VIDEO","axios","request","method","url","num","color","closeFullVideo","height","frameBorder","allowFullScreen","allow"],"mappings":"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","file":"static/js/7.63c560e1.chunk.js","sourcesContent":["import {\r\n  FETCH_GAMES_REQUEST,\r\n  FETCH_GAMES_SUCCESS\r\n} from \"../const/ActionTypes\";\r\nimport  {fetchData}  from '../utils/apiCaller';\r\n// đang cần làm gì? lấy data\r\nexport const gamesFetchRequest = (btnActive) => {\r\n  return {\r\n    type: FETCH_GAMES_REQUEST,\r\n    payload : {btnActive}\r\n  }\r\n}\r\n\r\n// lấy những cái nào trong data? đẩy lên reduces\r\nexport const gamesFetchSuccess = (fetchedData, nextUrl, btnActive) => {\r\n  return {\r\n      type: FETCH_GAMES_SUCCESS,\r\n      payload: {fetchedData, nextUrl, btnActive}\r\n  }\r\n}\r\n\r\n\r\n// thực hiện action lấy dữ liệu từ api sau đó gửi lên reducers để setup lại state\r\nexport const fetchGames = (API_URL,btnActive) => async (dispatch) => {\r\n  try {\r\n    //gửi yêu cầu sẽ lấy api chuẩn bị đổ vào reducers\r\n      await dispatch(gamesFetchRequest(btnActive));\r\n      const data = await fetchData(API_URL);\r\n      const { next, results } = data;\r\n      await dispatch(gamesFetchSuccess(results, next, btnActive));\r\n  } catch (err) {\r\n    console.log('fetchGenre error', err);\r\n  }\r\n};\r\n\r\n","import React, {useEffect,useState} from 'react'\r\n// import {GENRES} from '../data/genresGlobal'\r\nimport { connect } from 'react-redux'\r\nimport {fetchGenres} from '../actions/GenresActions'\r\nimport {fetchGames} from '../actions/GamesActions'\r\nimport {Link,useLocation} from 'react-router-dom'\r\nimport { BsFillCaretDownFill } from \"react-icons/bs\"\r\n\r\nconst ListGenres = ({listGenres,fetchGenres,fetchGames,listGames}) => {\r\n  \r\n  const location = useLocation();\r\n  const  API_URL= \"https://api.rawg.io/api/genres\";\r\n\r\n  let linkCallData = `https://api.rawg.io/api${location.pathname}${location.search}`;\r\n  let btnActive = location.search?location.search.slice(location.search.lastIndexOf('=')+1):'games'\r\n\r\n  // gọi data game theo genres\r\n  useEffect(() => {\r\n    !Object.keys(listGames).includes(btnActive)&&\r\n    fetchGames(linkCallData,btnActive)\r\n  },[fetchGames,btnActive,linkCallData,listGames])\r\n  \r\n  const mapGenres = listGenres.map((item)=>\r\n    <Link label={item.slug} key={item.id} \r\n    to={`games?genres=${item.slug}`}\r\n    className={`link ${item.slug===btnActive?'link--active':''}`} \r\n    style={{textDecoration: 'none'}}\r\n    >{item.name}</Link>\r\n    )\r\n  \r\n  useEffect(() => {\r\n    fetchGenres(API_URL)\r\n  },[fetchGenres])\r\n\r\n  const [expanded, setExpanded] = useState(false);\r\n   const handleClick = () => {\r\n    setExpanded(prev => !prev);\r\n  };\r\n  return (\r\n    <nav className=\"header-genres\">\r\n      <div className=\"header-genres__expanded\">\r\n        <span className=\"header-genres__current-genre\">{btnActive || 'Genre'}</span>\r\n        <span className=\"header-genres__expanded-icon\" onClick={handleClick}>\r\n          <BsFillCaretDownFill\r\n             style={{\r\n              fontSize: '16px',\r\n              transition: '0.2s',\r\n              transform: `rotate(${expanded ? '180deg' : '0deg'})`\r\n            }}\r\n          />\r\n        </span>\r\n      </div>\r\n      <div className={`header-genres__menu ${expanded ?'header-genres__menu--expanded':''}`}>\r\n        {mapGenres}\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state =>{\r\n  return {\r\n    listGenres: state.collectionGenres.genres,\r\n    loadingGenres: state.collectionGenres.loading,\r\n    listGames: state.collectionGame\r\n  }\r\n}\r\nexport default connect(mapStateToProps,{fetchGenres,fetchGames})(ListGenres);\r\n","import {\r\n  FETCH_GENRES_SUCCESS\r\n} from \"../const/ActionTypes\";\r\n\r\nimport  {fetchData}  from '../utils/apiCaller';\r\n\r\nexport const genresFetchSuccess = (fetchedData) => {\r\n  return {\r\n      type: FETCH_GENRES_SUCCESS,\r\n      payload: {fetchedData}\r\n  }\r\n}\r\n\r\nexport const fetchGenres = (API_URL) => async (dispatch) => {\r\n  try {\r\n\r\n    const data = await fetchData(API_URL);\r\n    const {results} = data;\r\n    \r\n    dispatch(genresFetchSuccess(results));\r\n  } catch (err) {\r\n    console.log('fetcGenres error', err);\r\n  }\r\n};","import React, { useRef, useState } from 'react';\r\nimport { FaPlay } from 'react-icons/fa';\r\nimport { connect } from 'react-redux';\r\nimport Loading from './Loading';\r\nimport {openVideo} from '../actions/VideoAction'\r\nconst Video = ({clip,play,getIdVideo}) => {\r\n  const videoRef = useRef(null);\r\n  const [loading, setLoading] = useState();\r\n\r\n  const handleLoadedData = () => {\r\n    setLoading(true)\r\n    if(play){\r\n      setLoading(false)\r\n      videoRef.current.volume = 0;\r\n      videoRef.current.play();\r\n    }\r\n  };\r\n  \r\n  const openFullVideo = () => {\r\n    getIdVideo(clip.video)\r\n  }\r\n  return (\r\n    <div className=\"video\">\r\n      {loading && <Loading className=\"video__loading\" />}\r\n      <video className=\"video__frame\" ref={videoRef} src={clip.clip} onLoadedData={handleLoadedData} loop/>\r\n      <button className=\"video__full-frame\" onClick={openFullVideo}>\r\n        <FaPlay className=\"icon\" />\r\n        <span>Full video</span>\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    // chuyển dữ liệu từ \r\n    getIdVideo: (idVideo) => {dispatch(openVideo(idVideo))},\r\n  }\r\n}\r\n\r\nexport default connect(null,mapDispatchToProps)(Video)\r\n","import React, { useState } from 'react';\r\nimport { FaPlay } from 'react-icons/fa';\r\nimport {\r\n  FaWindows,\r\n  FaPlaystation,\r\n  FaXbox\r\n} from 'react-icons/fa';\r\nimport { AiTwotoneLike } from 'react-icons/ai'\r\nimport setMetacriticColor from '../utils/setMetacriticColor'\r\nimport Video from '../components/Video'\r\nimport formatImageUrl from '../utils/formatImageUrl'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst ItemGame = ({background_image,metacritic,name,clip,slug}) => {\r\n  const [hover, setHover] = useState(false);\r\n  const handleMouseEnter = e => {\r\n    setHover(true);\r\n  };\r\n  const background_image_conver = formatImageUrl(background_image)\r\n  const handleMouseLeave = e => {\r\n    setHover(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"game-item\"\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n    > \r\n      <div className=\"background\" style={{backgroundImage: `url(\"${background_image_conver}\")`}}>\r\n        {clip &&<FaPlay className=\"icon icon--play\" />}\r\n      </div>\r\n      {hover && clip && <Video clip={clip} play={hover}/>} \r\n      <div className=\"game-item__info\">\r\n        <div className=\"game-item__info__top\">\r\n          <div className=\"game-item__platforms\">\r\n            <FaWindows className=\"icon icon--pc\" style={{ marginRight: '0.6rem' }}/>\r\n            <FaPlaystation className=\"icon icon--playstation\" style={{ marginRight: '0.6rem' }}/>\r\n            <FaXbox className=\"icon icon--xbox\"/>\r\n          </div>\r\n          <span className={`game-item__meta ${setMetacriticColor(metacritic)}`}>{metacritic||0}</span>\r\n        </div>\r\n        <div className=\"game-item__info__bottom\">\r\n          <Link title=\"Grand Theft Auto V\" className=\"heading-1 game-item__name\" to={`/games/${slug}`} style={{textDecoration: 'none'}}>{name}</Link>\r\n          <AiTwotoneLike className=\"icon icon--like\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default React.memo(ItemGame)\r\n","export default function formatImageUrl(urlBgImage) {\r\n  const IMAGE_URL = 'https://media.rawg.io/media/';\r\n  const urlReplaced =\"https://media.rawg.io/media/crop/600/400/\";\r\n  return urlBgImage?urlBgImage.replace(IMAGE_URL, urlReplaced):'https://images7.alphacoders.com/389/389072.png';\r\n}\r\n","import { useEffect, useState } from 'react'\r\n\r\nfunction useWindowSize() {\r\n  // Initialize state with undefined width/height so server and client renders match\r\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\r\n  const [windowSize, setWindowSize] = useState({\r\n    width: window.innerWidth,\r\n    // height: undefined,\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Handler to call on window resize\r\n    function handleResize() {\r\n      // Set window width/height to state\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        // height: window.innerHeight,\r\n      });\r\n    }\r\n    \r\n    // Add event listener\r\n    window.addEventListener(\"resize\", handleResize);\r\n    \r\n    // Call handler right away so state gets updated with initial window size\r\n    handleResize();\r\n    \r\n    // Remove event listener on cleanup\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []); // Empty array ensures that effect is only run on mount\r\n\r\n  return windowSize;\r\n}\r\n\r\nexport default useWindowSize\r\n","import React, {useEffect}  from 'react';\r\nimport ItemGame from '../components/ItemGame'\r\n// import {data} from '../data/gameGlobal'\r\nimport { connect } from 'react-redux';\r\nimport {fetchGames} from '../actions/GamesActions'\r\nimport Loading from '../components/Loading'\r\nimport { useLocation } from 'react-router-dom';\r\nimport useWindowSize from '../utils/useWindowSize'\r\n\r\nconst ListGames = ({listGames,fetchGames}) => {\r\nconst size = useWindowSize()\r\nconst setCol = (windowSize) => {\r\n  if(windowSize>=1200) return 4;\r\n  if(windowSize>=992) return 3;\r\n  if(windowSize>=768) return 2;\r\n  if(windowSize<768) return 1;\r\n}\r\n  const location = useLocation();\r\n  let btnActive = location.search?location.search.slice(location.search.lastIndexOf('=')+1):'games'\r\n  let colRendered = setCol(size.width);\r\n  const renderGames = games => {\r\n    let col = 0;\r\n    const items = [];\r\n    for (let i = 0; i < colRendered; i++) {\r\n      items.push([]);\r\n    }\r\n    for (let i = 0; i < games.length; i++) {\r\n      items[col].push(games[i]);\r\n      col++;\r\n      if (col === colRendered) {\r\n        col = 0;\r\n      }\r\n    }\r\n    return items.map((col,index)=>\r\n    <div className=\"col\" key={'games-' + index}>\r\n      {col.map(game=>\r\n          <ItemGame key={game.id} {...game}/>\r\n      )}\r\n  </div>\r\n    )\r\n  };\r\n;\r\n\r\n // gọi data game page tiếp theo dựa vào listGames\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      if (\r\n        listGames[btnActive] && \r\n        window.innerHeight + window.scrollY >=\r\n        document.body.offsetHeight\r\n      ) {\r\n        fetchGames(listGames[btnActive].nextUrl,btnActive)\r\n      }\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n\r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll);\r\n    };\r\n  }, [fetchGames,listGames,btnActive]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"games-rendered\"\r\n        style={{\r\n        gridTemplateColumns: `repeat(${colRendered}, minmax(30rem, 50rem)`\r\n      }}\r\n      >\r\n        {listGames[btnActive] && renderGames(listGames[btnActive].games)}\r\n      </div>\r\n      {listGames[btnActive] && <Loading loading={listGames[btnActive].loading}/>}\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  // call data games từ store đặt tên là listGames\r\n  // collectionGame là tên bí danh đăt ở reducers/index\r\n  return { \r\n    listGames: state.collectionGame,\r\n  }\r\n}\r\nexport default connect(mapStateToProps,{fetchGames})(ListGames);\r\n","import React from 'react'\r\nimport ListGenres from '../components/ListGenres';\r\nimport ListGames from '../components/ListGames';\r\nimport FullVideo from '../components/FullVideo';\r\nimport { connect } from 'react-redux';\r\nfunction Games({videoId}) {\r\n  return (\r\n    <>\r\n      <div style={{margin: '2rem 0px 5rem'}}>\r\n        <ListGenres/>\r\n        <ListGames/>\r\n      </div>\r\n        {videoId && <FullVideo videoId={videoId}/>}\r\n    </>\r\n  )\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    videoId: state.actionVideo.videoId,\r\n  }\r\n}\r\nexport default connect(mapStateToProps,null)(Games)\r\n","import \r\n{OPEN_VIDEO,\r\nCLOSE_VIDEO\r\n}\r\nfrom '../const/ActionTypes'\r\n\r\nexport const openVideo = (videoId) => {\r\n  return {\r\n    type: OPEN_VIDEO,\r\n    payload: videoId\r\n  }\r\n}\r\nexport const closeVideo = () => {\r\n  return {\r\n    type: CLOSE_VIDEO\r\n  }\r\n}","import axios from 'axios';\r\nexport const fetchData = async (API_URL) => {\r\n  try{\r\n    const {data} =  await axios.request({\r\n      method: 'GET',\r\n      url: API_URL\r\n    })\r\n    return data; \r\n  }catch(error) {\r\n    console.log(error);\r\n  };\r\n};\r\n\r\n\r\n","export default function setMetacriticColor(num) {\r\n\r\n  let color = 'metacritic-';\r\n  if (num >= 75) {\r\n    color += 'green';\r\n  } else if (num >= 50) {\r\n    color += 'yellow';\r\n  } else if (num >= 25) {\r\n    color += 'blue';\r\n  } else {\r\n    color += 'red';\r\n  }\r\n\r\n  return color;\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport {closeVideo} from '../actions/VideoAction'\r\n\r\nfunction FullVideo({videoId,closeFullVideo}) {\r\n  const onClose = () => {\r\n    closeFullVideo()\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"full-video\">\r\n        <span className=\"full-video__close\" onClick={onClose}>\r\n          &times;\r\n        </span>\r\n        <div className=\"full-video__frame\">\r\n          <iframe\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            frameBorder=\"0\"\r\n            allowFullScreen\r\n            allow=\"accelerometer; autoplay; encrypted-media; picture-in-picture\"\r\n            title=\"Youtube video player\"\r\n            src={`https://www.youtube.com/embed/${videoId}?autoplay=1`}\r\n          ></iframe>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    // chuyển dữ liệu từ \r\n    closeFullVideo: () => {dispatch(closeVideo())},\r\n  }\r\n}\r\n\r\nexport default connect(null,mapDispatchToProps)(FullVideo)\r\n"],"sourceRoot":""}